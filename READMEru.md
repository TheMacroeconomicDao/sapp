# sapp
Sapphir Secure Massenger


Техническое задание на разработку веб-мессенджера с использованием IPFS, Redis, шифрования на стороне клиента и аутентификации через MetaMask

1. Введение
1.1. Назначение
Данный документ представляет собой техническое задание на разработку веб-мессенджера, рассчитанного на приватное и безопасное взаимодействие пользователей, с возможностью хранения данных в IPFS и использованием Redis для кэширования.

2. Общие требования
2.1. Целевая платформа
Веб-платформа с адаптивным дизайном. Фронтенд: React + TypeScript. Бэкенд: Rust.

2.2. Интеграции

IPFS для хранения холодных данных.
Redis для кэширования горячих данных.
MetaMask или аналогичное расширение для аутентификации и шифрования.
3. Функциональные требования
3.1. Аутентификация

Опциональная аутентификация через MetaMask.
Возможность гостевого входа.
3.2. Обмен сообщениями

Отправка и получение текстовых, графических и аудио сообщений.
Групповые чаты.
Уведомления о новых сообщениях.
3.3. Хранение данных

Горячие данные хранятся в Redis до 20 часов.
После 20 часов, данные перемещаются в IPFS.
Формат данных: JSON.
3.4. Шифрование

Шифрование сообщений на стороне клиента.
Использование MetaMask для управления ключами шифрования.
4. Технические требования
4.1. Архитектура

Микросервисная архитектура.
API Gateway для управления запросами.
WebSocket для функционала в реальном времени.
4.2. Безопасность

Ограничение скорости запросов.
Защита от DoS-атак.
Внедрение WAF.
Обновление SSL/TLS сертификатов.
4.3. Мониторинг

Интеграция с системами мониторинга: Prometheus, Grafana.
Логирование событий: ELK Stack.
4.4. Документация

API документация для разработчиков.
Инструкции для пользователей.
5. Заключение
Данный мессенджер позволит обеспечить высокую степень приватности и безопасности для пользователей, сочетая в себе преимущества IPFS, Redis и шифрования на стороне клиента. На каждом этапе разработки необходимо тщательное тестирование, чтобы обеспечить соответствие требованиям и высокое качество продукта.


Архитектура 

Auth Service (Сервис Аутентификации)

src
controllers (обработчики запросов для аутентификации)
models (схемы пользователей и сессий)
services (бизнес-логика, взаимодействие с MetaMask)
middleware (проверка аутентификации, обработчики ошибок)
main.rs (точка входа для этого микросервиса)
Messaging Service (Сервис Сообщений)

src
controllers (обработчики запросов для сообщений и чатов)
models (схемы сообщений, чатов)
services (логика отправки/получения сообщений, уведомления)
websocket (WebSocket сервер для реализации чата в реальном времени)
main.rs (точка входа для этого микросервиса)
Storage Service (Сервис Хранения)

src
controllers (обработчики запросов для хранилища)
models (схемы данных для хранения)
services (логика переноса данных из Redis в IPFS и обратно)
main.rs (точка входа для этого микросервиса)
Encryption Service (Сервис Шифрования)

src
services (методы шифрования и дешифрования данных)
main.rs (точка входа для этого микросервиса)
Monitoring and Logging Service (Сервис Мониторинга и Логирования)

src
monitoring (интеграция с Prometheus и Grafana)
logging (интеграция с ELK Stack для анализа логов)
main.rs (точка входа для этого микросервиса)
API Gateway (Шлюз API)

src
routes (маршрутизация запросов)
middleware (общие обработчики, защита от DoS)
main.rs (точка входа для этого компонента)
Общие библиотеки и утилиты

common
utils (утилиты и хелперы)
constants (общие константы, настройки)
models (общие модели и интерфейсы)
Конфигурация и окружение

config
Файлы с настройками для разных окружений (dev, prod и т.д.)
Документация и ресурсы

docs
API документация
Техническая документация
Тесты

tests
Единичные тесты для каждого сервиса
Скрипты развертывания и CI/CD

scripts
Dockerfile для каждого сервиса
CI/CD конфигурация
Встроенный переводчик

Может быть реализован как отдельный микросервис или интегрирован в основной сервис сообщений.
